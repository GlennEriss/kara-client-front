# SÃ©lecteurs E2E pour les Composants V2 - Module GÃ©ographie

## âœ… Correspondance SÃ©lecteurs E2E â†” Composants V2

### Tabs (Onglets)
| SÃ©lecteur E2E | `data-testid` Composant V2 | âœ… |
|--------------|---------------------------|-----|
| `[data-testid="tab-provinces"]` | `tab-provinces` | âœ… |
| `[data-testid="tab-departments"]` | `tab-departments` | âœ… |
| `[data-testid="tab-communes"]` | `tab-communes` | âœ… |
| `[data-testid="tab-districts"]` | `tab-districts` | âœ… |
| `[data-testid="tab-quarters"]` | `tab-quarters` | âœ… |

### Statistiques
| SÃ©lecteur E2E | `data-testid` Composant V2 | âœ… |
|--------------|---------------------------|-----|
| `[data-testid="stat-provinces"]` | `stat-provinces` | âœ… |
| `[data-testid="stat-departments"]` | `stat-departments` | âœ… |
| `[data-testid="stat-communes"]` | `stat-communes` | âœ… |
| `[data-testid="stat-districts"]` | `stat-districts` | âœ… |
| `[data-testid="stat-quarters"]` | `stat-quarters` | âœ… |
| `[data-testid="stat-provinces-value"]` | `stat-provinces-value` | âœ… |

### Listes
| SÃ©lecteur E2E | `data-testid` Composant V2 | âœ… |
|--------------|---------------------------|-----|
| `[data-testid="province-list-v2"]` | `province-list-v2` | âœ… |
| `[data-testid="department-list-v2"]` | `department-list-v2` | âœ… |
| `[data-testid="commune-list-v2"]` | `commune-list-v2` | âœ… |
| `[data-testid="district-list-v2"]` | `district-list-v2` | âœ… |
| `[data-testid="quarter-list-v2"]` | `quarter-list-v2` | âœ… |
| `[data-testid="province-list-title"]` | `province-list-title` | âœ… |
| `[data-testid="department-list-title"]` | `department-list-title` | âœ… |
| `[data-testid="commune-list-title"]` | `commune-list-title` | âœ… |

### Boutons d'Action
| SÃ©lecteur E2E | `data-testid` Composant V2 | âœ… |
|--------------|---------------------------|-----|
| `[data-testid="btn-new-province"]` | `btn-new-province` | âœ… |
| `[data-testid="btn-new-department"]` | `btn-new-department` | âœ… |
| `[data-testid="btn-new-commune"]` | `btn-new-commune` | âœ… |
| `[data-testid="btn-new-district"]` | `btn-new-district` | âœ… |
| `[data-testid="btn-new-quarter"]` | `btn-new-quarter` | âœ… |
| `[data-testid="btn-export-csv"]` | `btn-export-csv` | âœ… |
| `[data-testid^="btn-edit-province-"]` | `btn-edit-province-{id}` (mobile)<br>`btn-edit-province-desktop-{id}` (desktop) | âœ… |
| `[data-testid^="btn-edit-department-"]` | `btn-edit-department-{id}` (mobile)<br>`btn-edit-department-desktop-{id}` (desktop) | âœ… |
| `[data-testid^="btn-edit-commune-"]` | `btn-edit-commune-{id}` (mobile)<br>`btn-edit-commune-desktop-{id}` (desktop) | âœ… |
| `[data-testid^="btn-edit-district-"]` | `btn-edit-district-{id}` (mobile)<br>`btn-edit-district-desktop-{id}` (desktop) | âœ… |
| `[data-testid^="btn-edit-quarter-"]` | `btn-edit-quarter-{id}` (mobile)<br>`btn-edit-quarter-desktop-{id}` (desktop) | âœ… |
| `[data-testid^="btn-delete-province-"]` | `btn-delete-province-{id}` (mobile)<br>`btn-delete-province-desktop-{id}` (desktop) | âœ… |
| `[data-testid^="btn-delete-department-"]` | `btn-delete-department-{id}` (mobile)<br>`btn-delete-department-desktop-{id}` (desktop) | âœ… |
| `[data-testid^="btn-delete-commune-"]` | `btn-delete-commune-{id}` (mobile)<br>`btn-delete-commune-desktop-{id}` (desktop) | âœ… |
| `[data-testid^="btn-delete-district-"]` | `btn-delete-district-{id}` (mobile)<br>`btn-delete-district-desktop-{id}` (desktop) | âœ… |
| `[data-testid^="btn-delete-quarter-"]` | `btn-delete-quarter-{id}` (mobile)<br>`btn-delete-quarter-desktop-{id}` (desktop) | âœ… |

### Champs de Formulaire
| SÃ©lecteur E2E | `data-testid` Composant V2 | âœ… |
|--------------|---------------------------|-----|
| `[data-testid="input-province-name"]` | `input-province-name` | âœ… |
| `[data-testid="input-province-code"]` | `input-province-code` | âœ… |
| `[data-testid="input-department-name"]` | `input-department-name` | âœ… |
| `[data-testid="input-department-code"]` | `input-department-code` | âœ… |
| `[data-testid="input-commune-name"]` | `input-commune-name` | âœ… |
| `[data-testid="input-district-name"]` | `input-district-name` | âœ… |
| `[data-testid="input-quarter-name"]` | `input-quarter-name` | âœ… |
| `[data-testid="input-search-province"]` | `input-search-province` | âœ… |
| `[data-testid="input-search-department"]` | `input-search-department` | âœ… |
| `[data-testid="input-search-commune"]` | `input-search-commune` | âœ… |
| `[data-testid="input-search-district"]` | `input-search-district` | âœ… |
| `[data-testid="input-search-quarter"]` | `input-search-quarter` | âœ… |

### SÃ©lecteurs (Select)
| SÃ©lecteur E2E | `data-testid` Composant V2 | âœ… |
|--------------|---------------------------|-----|
| `[data-testid="select-department-province"]` | âš ï¸ **MANQUANT** - Utilise `Select` de shadcn sans `data-testid` | âš ï¸ |
| `[data-testid="select-commune-department"]` | âš ï¸ **MANQUANT** - Utilise `Select` de shadcn sans `data-testid` | âš ï¸ |
| `[data-testid="select-district-commune"]` | âš ï¸ **MANQUANT** - Utilise `Select` de shadcn sans `data-testid` | âš ï¸ |
| `[data-testid="select-quarter-district"]` | âš ï¸ **MANQUANT** - Utilise `Select` de shadcn sans `data-testid` | âš ï¸ |

**Note** : Les tests E2E utilisent des sÃ©lecteurs de fallback (`select[name="provinceId"]`) pour les Select, ce qui est acceptable.

### Boutons de Soumission
| SÃ©lecteur E2E | `data-testid` Composant V2 | âœ… |
|--------------|---------------------------|-----|
| `[data-testid="btn-submit-province"]` | `btn-submit-province` | âœ… |
| `[data-testid="btn-submit-department"]` | `btn-submit-department` | âœ… |
| `[data-testid="btn-submit-commune"]` | `btn-submit-commune` | âœ… |
| `[data-testid="btn-submit-district"]` | `btn-submit-district` | âœ… |
| `[data-testid="btn-submit-quarter"]` | `btn-submit-quarter` | âœ… |

### Boutons de Confirmation de Suppression
| SÃ©lecteur E2E | `data-testid` Composant V2 | âœ… |
|--------------|---------------------------|-----|
| `[data-testid="btn-confirm-delete-province"]` | `btn-confirm-delete-province` | âœ… |
| `[data-testid="btn-confirm-delete-department"]` | `btn-confirm-delete-department` | âœ… |
| `[data-testid="btn-confirm-delete-commune"]` | `btn-confirm-delete-commune` | âœ… |
| `[data-testid="btn-confirm-delete-district"]` | `btn-confirm-delete-district` | âœ… |
| `[data-testid="btn-confirm-delete-quarter"]` | `btn-confirm-delete-quarter` | âœ… |

### Noms d'EntitÃ©s (pour vÃ©rification aprÃ¨s crÃ©ation/modification)
| SÃ©lecteur E2E | `data-testid` Composant V2 | âœ… |
|--------------|---------------------------|-----|
| `getEntityNameLocator(page, 'province', name)` | `province-name-{id}` (mobile)<br>`province-name-desktop-{id}` (desktop) | âœ… |
| `getEntityNameLocator(page, 'department', name)` | `department-name-{id}` (mobile)<br>`department-name-desktop-{id}` (desktop) | âœ… |
| `getEntityNameLocator(page, 'commune', name)` | `commune-name-{id}` (mobile)<br>`commune-name-desktop-{id}` (desktop) | âœ… |
| `getEntityNameLocator(page, 'district', name)` | `district-name-{id}` (mobile)<br>`district-name-desktop-{id}` (desktop) | âœ… |
| `getEntityNameLocator(page, 'quarter', name)` | `quarter-name-{id}` (mobile)<br>`quarter-name-desktop-{id}` (desktop) | âœ… |

**Note** : La fonction `getEntityNameLocator()` utilise `[data-testid^="${entityType}-name"]:has-text("${name}")` qui correspond aux deux formats (mobile et desktop) grÃ¢ce au sÃ©lecteur `^=` (commence par).

### Modals
| SÃ©lecteur E2E | `data-testid` Composant V2 | âœ… |
|--------------|---------------------------|-----|
| `[role="dialog"]` | Utilise l'attribut ARIA natif | âœ… |
| `[data-testid="modal-province-form"]` | `modal-province-form` | âœ… |
| `[data-testid="modal-department-form"]` | `modal-department-form` | âœ… |
| `[data-testid="modal-commune-form"]` | `modal-commune-form` | âœ… |
| `[data-testid="modal-district-form"]` | `modal-district-form` | âœ… |
| `[data-testid="modal-quarter-form"]` | `modal-quarter-form` | âœ… |

## âœ… RÃ©sumÃ©

**Tous les sÃ©lecteurs E2E sont bien adaptÃ©s pour fonctionner avec les composants V2 !**

### Points forts :
- âœ… Tous les `data-testid` principaux sont prÃ©sents et correspondent
- âœ… Les sÃ©lecteurs utilisent `^=` pour matcher mobile et desktop
- âœ… La fonction `getEntityNameLocator()` gÃ¨re automatiquement les deux formats
- âœ… Les sÃ©lecteurs de fallback sont prÃ©sents pour les Select de shadcn

### Points d'attention :
- âš ï¸ Les Select de shadcn n'ont pas de `data-testid` dÃ©diÃ©s, mais les tests utilisent des sÃ©lecteurs de fallback (`select[name="..."]`) qui fonctionnent

## ğŸ” VÃ©rification

Pour vÃ©rifier la correspondance, exÃ©cuter :
```bash
# VÃ©rifier les sÃ©lecteurs dans les tests
grep -E "data-testid=" e2e/geographie.spec.ts

# VÃ©rifier les data-testid dans les composants V2
grep -r "data-testid=" src/domains/infrastructure/geography/components/v2/
```
