
> kara@0.1.0 test /Users/glenneriss/Documents/projets/kara-client-front
> vitest --run --coverage src/domains/memberships


 RUN  v2.1.9 /Users/glenneriss/Documents/projets/kara-client-front
      Coverage enabled with v8

 âœ“ src/domains/memberships/__tests__/unit/utils/membershipValidation.test.ts (17 tests) 17ms
 âœ“ src/domains/memberships/__tests__/unit/utils/securityCode.test.ts (13 tests) 89ms
stdout | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait retourner une liste paginÃ©e de demandes
ğŸ” Repository.getAll - Filtres: {}

stderr | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait retourner une liste paginÃ©e de demandes
âŒ Erreur Repository.getAll: TypeError: Cannot read properties of undefined (reading 'type')
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
    at Array.map (<anonymous>)
    at MembershipRepositoryV2.getAll (/Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70)
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:105:39
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)

stdout | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait retourner une liste vide si aucune demande
ğŸ” Repository.getAll - Filtres: {}

stderr | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait retourner une liste vide si aucune demande
âŒ Erreur Repository.getAll: TypeError: Cannot read properties of undefined (reading 'type')
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
    at Array.map (<anonymous>)
    at MembershipRepositoryV2.getAll (/Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70)
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:129:39
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)

stdout | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par statut "pending"
ğŸ” Repository.getAll - Filtres: { status: 'pending' }

stderr | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par statut "pending"
âŒ Erreur Repository.getAll: TypeError: Cannot read properties of undefined (reading 'type')
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
    at Array.map (<anonymous>)
    at MembershipRepositoryV2.getAll (/Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70)
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:157:39
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)

stdout | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par statut "approved"
ğŸ” Repository.getAll - Filtres: { status: 'approved' }

stderr | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par statut "approved"
âŒ Erreur Repository.getAll: TypeError: Cannot read properties of undefined (reading 'type')
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
    at Array.map (<anonymous>)
    at MembershipRepositoryV2.getAll (/Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70)
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:184:39
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)

stdout | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par statut "rejected"
ğŸ” Repository.getAll - Filtres: { status: 'rejected' }

stderr | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par statut "rejected"
âŒ Erreur Repository.getAll: TypeError: Cannot read properties of undefined (reading 'type')
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
    at Array.map (<anonymous>)
    at MembershipRepositoryV2.getAll (/Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70)
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:211:39
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)

stdout | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par statut "under_review"
ğŸ” Repository.getAll - Filtres: { status: 'under_review' }

stderr | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par statut "under_review"
âŒ Erreur Repository.getAll: TypeError: Cannot read properties of undefined (reading 'type')
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
    at Array.map (<anonymous>)
    at MembershipRepositoryV2.getAll (/Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70)
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:238:39
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)

stdout | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait trier par date dÃ©croissante par dÃ©faut
ğŸ” Repository.getAll - Filtres: {}

stderr | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait trier par date dÃ©croissante par dÃ©faut
âŒ Erreur Repository.getAll: TypeError: Cannot read properties of undefined (reading 'type')
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
    at Array.map (<anonymous>)
    at MembershipRepositoryV2.getAll (/Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70)
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:265:39
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)

stdout | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par isPaid=true
ğŸ” Repository.getAll - Filtres: { isPaid: true }

stderr | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par isPaid=true
âŒ Erreur Repository.getAll: TypeError: Cannot read properties of undefined (reading 'type')
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
    at Array.map (<anonymous>)
    at MembershipRepositoryV2.getAll (/Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70)
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:297:39
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)

stdout | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait combiner les filtres (status + isPaid)
ğŸ” Repository.getAll - Filtres: { status: 'pending', isPaid: true }

stderr | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait combiner les filtres (status + isPaid)
âŒ Erreur Repository.getAll: TypeError: Cannot read properties of undefined (reading 'type')
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
    at Array.map (<anonymous>)
    at MembershipRepositoryV2.getAll (/Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70)
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:324:39
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)

stdout | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait throw une erreur si la connexion Firestore Ã©choue
ğŸ” Repository.getAll - Filtres: {}

stderr | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait throw une erreur si la connexion Firestore Ã©choue
âŒ Erreur Repository.getAll: TypeError: Cannot read properties of undefined (reading 'type')
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
    at Array.map (<anonymous>)
    at MembershipRepositoryV2.getAll (/Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70)
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:337:31
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)

stdout | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait retourner une liste vide si statut invalide
ğŸ” Repository.getAll - Filtres: { status: 'invalid' }

stderr | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait retourner une liste vide si statut invalide
âŒ Erreur Repository.getAll: TypeError: Cannot read properties of undefined (reading 'type')
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
    at Array.map (<anonymous>)
    at MembershipRepositoryV2.getAll (/Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70)
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:354:39
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)

stderr | src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > updateStatus > devrait throw si ID inexistant
âŒ Erreur Repository.updateStatus: Error: Demande avec ID non-existent-id introuvable
    at MembershipRepositoryV2.updateStatus (/Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/repositories/MembershipRepositoryV2.ts:185:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at /Users/glenneriss/Documents/projets/kara-client-front/src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:503:7
    at file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/glenneriss/Documents/projets/kara-client-front/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1271:3)

 âœ“ src/domains/memberships/__tests__/unit/services/MembershipServiceV2.test.ts (16 tests) 262ms
 â¯ src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts (27 tests | 11 failed) 424ms
   Ã— MembershipRepositoryV2 > getAll > devrait retourner une liste paginÃ©e de demandes 94ms
     â†’ Cannot read properties of undefined (reading 'type')
   Ã— MembershipRepositoryV2 > getAll > devrait retourner une liste vide si aucune demande 16ms
     â†’ Cannot read properties of undefined (reading 'type')
   Ã— MembershipRepositoryV2 > getAll > devrait filtrer par statut "pending" 1ms
     â†’ Cannot read properties of undefined (reading 'type')
   Ã— MembershipRepositoryV2 > getAll > devrait filtrer par statut "approved" 135ms
     â†’ Cannot read properties of undefined (reading 'type')
   Ã— MembershipRepositoryV2 > getAll > devrait filtrer par statut "rejected" 1ms
     â†’ Cannot read properties of undefined (reading 'type')
   Ã— MembershipRepositoryV2 > getAll > devrait filtrer par statut "under_review" 16ms
     â†’ Cannot read properties of undefined (reading 'type')
   Ã— MembershipRepositoryV2 > getAll > devrait trier par date dÃ©croissante par dÃ©faut 7ms
     â†’ Cannot read properties of undefined (reading 'type')
   Ã— MembershipRepositoryV2 > getAll > devrait filtrer par isPaid=true 1ms
     â†’ Cannot read properties of undefined (reading 'type')
   Ã— MembershipRepositoryV2 > getAll > devrait combiner les filtres (status + isPaid) 2ms
     â†’ Cannot read properties of undefined (reading 'type')
   Ã— MembershipRepositoryV2 > getAll > devrait throw une erreur si la connexion Firestore Ã©choue 139ms
     â†’ expected [Function] to throw error including 'Firestore connection error' but got 'Cannot read properties of undefined (â€¦'
   Ã— MembershipRepositoryV2 > getAll > devrait retourner une liste vide si statut invalide 1ms
     â†’ Cannot read properties of undefined (reading 'type')
 âœ“ src/domains/memberships/__tests__/unit/hooks/useMembershipActionsV2.test.ts (6 tests) 546ms
   âœ“ useMembershipActionsV2 > approveMutation > devrait appeler approveMembershipRequest avec les bons paramÃ¨tres 514ms
 âœ“ src/domains/memberships/__tests__/unit/hooks/useMembershipStatsV2.test.ts (4 tests) 748ms
   âœ“ useMembershipStatsV2 > devrait charger les statistiques au mount 485ms
 âœ“ src/domains/memberships/__tests__/unit/hooks/useMembershipRequestsV2.test.ts (11 tests) 1140ms
   âœ“ useMembershipRequestsV2 > fetching > devrait charger les demandes au mount 443ms
 âœ“ src/domains/memberships/__tests__/unit/utils/whatsappUrl.test.ts (15 tests) 20ms

â¯â¯â¯â¯â¯â¯ Failed Tests 11 â¯â¯â¯â¯â¯â¯â¯

 FAIL  src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait retourner une liste paginÃ©e de demandes
TypeError: Cannot read properties of undefined (reading 'type')
 â¯ src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
     93|       // Debug: Log de la requÃªte pour vÃ©rification
     94|       console.log('ğŸ” Repository.getAll - Filtres:', filters)
     95|       console.log('ğŸ” Repository.getAll - Constraints:', constraints.maâ€¦
       |                                                                                 ^
     96|       
     97|       // ExÃ©cuter la requÃªte
 â¯ MembershipRepositoryV2.getAll src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70
 â¯ src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:105:39

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/11]â¯

 FAIL  src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait retourner une liste vide si aucune demande
TypeError: Cannot read properties of undefined (reading 'type')
 â¯ src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
     93|       // Debug: Log de la requÃªte pour vÃ©rification
     94|       console.log('ğŸ” Repository.getAll - Filtres:', filters)
     95|       console.log('ğŸ” Repository.getAll - Constraints:', constraints.maâ€¦
       |                                                                                 ^
     96|       
     97|       // ExÃ©cuter la requÃªte
 â¯ MembershipRepositoryV2.getAll src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70
 â¯ src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:129:39

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/11]â¯

 FAIL  src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par statut "pending"
TypeError: Cannot read properties of undefined (reading 'type')
 â¯ src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
     93|       // Debug: Log de la requÃªte pour vÃ©rification
     94|       console.log('ğŸ” Repository.getAll - Filtres:', filters)
     95|       console.log('ğŸ” Repository.getAll - Constraints:', constraints.maâ€¦
       |                                                                                 ^
     96|       
     97|       // ExÃ©cuter la requÃªte
 â¯ MembershipRepositoryV2.getAll src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70
 â¯ src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:157:39

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/11]â¯

 FAIL  src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par statut "approved"
TypeError: Cannot read properties of undefined (reading 'type')
 â¯ src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
     93|       // Debug: Log de la requÃªte pour vÃ©rification
     94|       console.log('ğŸ” Repository.getAll - Filtres:', filters)
     95|       console.log('ğŸ” Repository.getAll - Constraints:', constraints.maâ€¦
       |                                                                                 ^
     96|       
     97|       // ExÃ©cuter la requÃªte
 â¯ MembershipRepositoryV2.getAll src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70
 â¯ src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:184:39

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/11]â¯

 FAIL  src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par statut "rejected"
TypeError: Cannot read properties of undefined (reading 'type')
 â¯ src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
     93|       // Debug: Log de la requÃªte pour vÃ©rification
     94|       console.log('ğŸ” Repository.getAll - Filtres:', filters)
     95|       console.log('ğŸ” Repository.getAll - Constraints:', constraints.maâ€¦
       |                                                                                 ^
     96|       
     97|       // ExÃ©cuter la requÃªte
 â¯ MembershipRepositoryV2.getAll src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70
 â¯ src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:211:39

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/11]â¯

 FAIL  src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par statut "under_review"
TypeError: Cannot read properties of undefined (reading 'type')
 â¯ src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
     93|       // Debug: Log de la requÃªte pour vÃ©rification
     94|       console.log('ğŸ” Repository.getAll - Filtres:', filters)
     95|       console.log('ğŸ” Repository.getAll - Constraints:', constraints.maâ€¦
       |                                                                                 ^
     96|       
     97|       // ExÃ©cuter la requÃªte
 â¯ MembershipRepositoryV2.getAll src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70
 â¯ src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:238:39

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/11]â¯

 FAIL  src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait trier par date dÃ©croissante par dÃ©faut
TypeError: Cannot read properties of undefined (reading 'type')
 â¯ src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
     93|       // Debug: Log de la requÃªte pour vÃ©rification
     94|       console.log('ğŸ” Repository.getAll - Filtres:', filters)
     95|       console.log('ğŸ” Repository.getAll - Constraints:', constraints.maâ€¦
       |                                                                                 ^
     96|       
     97|       // ExÃ©cuter la requÃªte
 â¯ MembershipRepositoryV2.getAll src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70
 â¯ src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:265:39

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/11]â¯

 FAIL  src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait filtrer par isPaid=true
TypeError: Cannot read properties of undefined (reading 'type')
 â¯ src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
     93|       // Debug: Log de la requÃªte pour vÃ©rification
     94|       console.log('ğŸ” Repository.getAll - Filtres:', filters)
     95|       console.log('ğŸ” Repository.getAll - Constraints:', constraints.maâ€¦
       |                                                                                 ^
     96|       
     97|       // ExÃ©cuter la requÃªte
 â¯ MembershipRepositoryV2.getAll src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70
 â¯ src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:297:39

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[8/11]â¯

 FAIL  src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait combiner les filtres (status + isPaid)
TypeError: Cannot read properties of undefined (reading 'type')
 â¯ src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
     93|       // Debug: Log de la requÃªte pour vÃ©rification
     94|       console.log('ğŸ” Repository.getAll - Filtres:', filters)
     95|       console.log('ğŸ” Repository.getAll - Constraints:', constraints.maâ€¦
       |                                                                                 ^
     96|       
     97|       // ExÃ©cuter la requÃªte
 â¯ MembershipRepositoryV2.getAll src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70
 â¯ src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:324:39

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[9/11]â¯

 FAIL  src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait throw une erreur si la connexion Firestore Ã©choue
AssertionError: expected [Function] to throw error including 'Firestore connection error' but got 'Cannot read properties of undefined (â€¦'

Expected: "Firestore connection error"
Received: "Cannot read properties of undefined (reading 'type')"

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[10/11]â¯

 FAIL  src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts > MembershipRepositoryV2 > getAll > devrait retourner une liste vide si statut invalide
TypeError: Cannot read properties of undefined (reading 'type')
 â¯ src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:81
     93|       // Debug: Log de la requÃªte pour vÃ©rification
     94|       console.log('ğŸ” Repository.getAll - Filtres:', filters)
     95|       console.log('ğŸ” Repository.getAll - Constraints:', constraints.maâ€¦
       |                                                                                 ^
     96|       
     97|       // ExÃ©cuter la requÃªte
 â¯ MembershipRepositoryV2.getAll src/domains/memberships/repositories/MembershipRepositoryV2.ts:95:70
 â¯ src/domains/memberships/__tests__/unit/repositories/MembershipRepositoryV2.test.ts:354:39

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[11/11]â¯

 Test Files  1 failed | 7 passed (8)
      Tests  11 failed | 98 passed (109)
   Start at  10:45:47
   Duration  10.49s (transform 5.37s, setup 10.70s, collect 7.66s, tests 3.24s, environment 9.02s, prepare 1.20s)

â€‰ELIFECYCLEâ€‰ Test failed. See above for more details.
